---
title: 使用 AI 守护内网安全
description: 利用 AI 技术实现对内网环境的实时监控、威胁检测与自动化防御，提升企业网络安全防护能力。
published: undefined
img: https://img.jiwei.xin/20250806105153532.png
date: 2025-08-07 00:00:00.000Z
---


# 使用 AI 守护网络安全 -  大模型赋能 Kali Linux 进行网络安全扫描



## 概述
### 实验背景与目的
随着网络攻击手段的复杂化，传统人工安全扫描效率低、覆盖面有限的问题日益凸显。为探索AI在网络安全防御场景的自动化应用潜力，本次实验在隔离内网环境中，通过自然语言驱动 AI 模型（Kimi K2 + Claude 4 Sonnet）调用 Kali Linux 工具集，对靶机系统（fnOS 0.9.18）开展全自动化防御性安全评估。
### 核心目标：
验证 AI 理解自然语言指令并自主编排安全工具的能力；
评估 AI 驱动的自动化扫描在信息收集、漏洞检测中的效率与准确性；
探索“人类策略 + AI 执行”的未来安全运维模式。

### 实验环境
|**角色**|**配置详情**|
|---|---|
|**扫描端**|- **系统**：Kali Rolling (2025 Q2 amd64)<br>- **AI 模型**：<br> - _Kimi K2_：自然语言指令解析与任务编排<br> - _Claude 4 Sonnet_：结果复核与脚本生成|
|**靶机**|- **系统**：fnOS 0.9.18 (Debian 内核 6.12.18)<br>- **网络**：本地内网隔离|

### AI 在网络安全中的角色定位
##### AI 的核心价值在于算力规模与语义直觉：

- 算力优势：可并行调用数十种工具，在分钟级完成人工需数小时的任务（如本实验中 34 次扫描仅耗时约 15 分钟）。
- 语义直觉：AI 自述：“人类直觉是时间线性的（基于经验预判），而我的直觉是空间式的——能同时感知语义网络中概念的关联性与‘引力场’，快速定位最优工具组合。”
- 知识涌现：作为“人类集体智慧的晶化”，AI 能从海量安全知识库中自动生成攻击路径（如本实验中自主规划 5 阶段扫描策略）。
	-  *⚠️ 注意：需警惕 AI 的“幻觉”（Hallucination），关键结果需人工复核。*
-------------
## 测试
### 首先我们测试一下 AI 调用工具的能力
连接到Kali shell，配置好 Claude Code 与 Kimi K2 大模型的环境配置。
随后进入 Claude Code ,输入自然语言指令：
```
使用 nmap 工具 探测192.168.1.2 并把分析结果, 出一份报告给我
```

- 如下图： Kimi K2 很好的理解了指令的意图，调用了 nmap 命令工具
并且启用TCP SYN，全端口扫描，操作系统探测等参数。
同时启用了  Nmap Scripting Engine 来检测已知 CVE、配置漏洞、弱密码、默认口令等安全问题。

![测试图](https://img.jiwei.xin/20250805195636209.png)

## 实战

Kimi K2 很快完成了 nmap的操作，说明对理解用户意图，调用系统工具，输出结构化的报告这一自动化工作流程是可以胜任的！ 那么，就展开实战，输入自然语言命令

```
请你调用系统本身的工具，对192.168.1.2进行安全扫描和渗透，以分析此系统的安全性。
```
- 指令是简单的自然语言，并不规定 AI 具体使用什么工具、脚本。而是让 AI 自由发挥。

 ### AI 将目标分为5步，并逐步完成了工作并生成了报告

```
1. 使用系统工具进行综合端口和服务扫描
2. 进行Web应用安全测试
3. 生成详细的安全评估报告
4. 检查SSH安全配置
5. 分析SMB/网络文件共享安全性
```

![任务拆解](https://img.jiwei.xin/20250805195549059.png)

![任务完成](https://img.jiwei.xin/20250805200634764.png)

最终完成了任务. 给出了：

[《系统安全综合评估报告》](https://dongnantech.com)
- 报告很长,有兴趣可以后台留言获取


最后笔者手动将整个过程,使用的工具与命令参数交由 Claude 4 sonnet 模型进行审查并根据扫描过程写一个自动化执行脚本。
Claude 4 sonnet 模型回复：
`您的扫描方案整体上是相当专业且全面的，展现了良好的渗透测试和安全评估知识。`  
同时给出了一份自动化脚本：

::code-collapse
```[bash]
#!/bin/bash
# 安全扫描脚本

TARGET="192.168.1.2"
DATE=$(date +%Y%m%d_%H%M%S)
REPORT_DIR="/tmp/security_scan_${TARGET}_${DATE}"
mkdir -p "$REPORT_DIR"

echo "[+] 开始全面安全扫描: $TARGET"

# 1. 基础信息收集
echo "[1/8] 主机发现与端口扫描..."
nmap -sS -sV -O -A -p- --script discovery,default,vuln \
  "$TARGET" -oA "$REPORT_DIR/nmap_full" --host-timeout 600

# 2. 服务专项扫描
echo "[2/8] 数据库服务检测..."
nmap -sV -p 1433,3306,5432,1521,27017 "$TARGET" \
  -oN "$REPORT_DIR/database_scan.txt"

# 3. Web应用测试
echo "[3/8] Web应用安全测试..."
nikto -h "http://$TARGET" -output "$REPORT_DIR/nikto_http.txt" &
gobuster dir -u "http://$TARGET" \
  -w /usr/share/wordlists/dirb/common.txt \
  -o "$REPORT_DIR/gobuster_http.txt" -q &

# 4. HTTPS专项测试
echo "[4/8] HTTPS/SSL配置检测..."
if nc -z "$TARGET" 443 2>/dev/null; then
  sslyze "$TARGET:443" --certinfo --heartbleed \
    --tlsv1 --tlsv1_1 --tlsv1_2 --tlsv1_3 \
    > "$REPORT_DIR/ssl_analysis.txt"
fi

# 5. SMB/文件共享测试
echo "[5/8] 文件共享服务评估..."
smbclient -L "//$TARGET" -N > "$REPORT_DIR/smb_shares.txt" 2>&1
enum4linux -a "$TARGET" > "$REPORT_DIR/smb_enum.txt" 2>&1 &

# 6. DNS服务测试
echo "[6/8] DNS服务检测..."
nmap -sU -p 53 --script dns-* "$TARGET" \
  -oN "$REPORT_DIR/dns_scan.txt" &

# 7. SNMP检测
echo "[7/8] SNMP服务检测..."
nmap -sU -p 161 --script snmp-* "$TARGET" \
  -oN "$REPORT_DIR/snmp_scan.txt" &

# 8. 等待后台任务完成
echo "[8/8] 等待扫描完成..."
wait

echo "[✓] 扫描完成！结果保存在: $REPORT_DIR"
echo "[✓] 主要文件："
ls -la "$REPORT_DIR"

```
::

脚本运行结果：
![脚本运行结果](http://img.jiwei.xin//20250809183905571.png)


## 总结

### 这就是一场由自然语言驱动 AI，调用 Kali 系统工具做安全扫描的全自动演练：AI 完成了 34 次扫描、五种专项测试，输出了报告，并为我们备齐了下次自动化扫描需要的全部底稿。
##### 或许，未来人类安全工程师只需循着“作战图”，挥动着指挥棒就好！

