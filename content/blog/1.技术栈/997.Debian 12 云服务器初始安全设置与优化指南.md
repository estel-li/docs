---
title: Debian 12 äº‘æœåŠ¡å™¨åˆå§‹å®‰å…¨è®¾ç½®ä¸ä¼˜åŒ–æŒ‡å—
description: Debian 12 äº‘æœåŠ¡å™¨åˆå§‹å®‰å…¨è®¾ç½®ä¸ä¼˜åŒ–æŒ‡å—
published: undefined
img: https://img.jiwei.xin/20250615184027376.png
date: 2025-05-15 00:00:00.000Z
---

> ğŸ”’ **æ–‡æ¡£è¯´æ˜**ï¼šæœ¬æ–‡é’ˆå¯¹æ–°éƒ¨ç½²çš„ Debian 12 äº‘æœåŠ¡å™¨ï¼Œæä¾›å¿…åšçš„å®‰å…¨åŠ å›ºä¸æ€§èƒ½ä¼˜åŒ–é…ç½®æ¸…å•ã€‚é€‚ç”¨äº**è¿ç»´äººå‘˜**åŠ**Linuxåˆå­¦è€…**ï¼Œå¯æœ‰æ•ˆé˜²å¾¡ 90% çš„å¸¸è§æ”»å‡»å‘é‡ã€‚

## æŠ€æœ¯TAG
`#Debian12å®‰å…¨è®¾ç½®` `#LinuxåŠ å›º` `#æœåŠ¡å™¨ä¼˜åŒ–` `#äº‘æœåŠ¡å™¨å®‰å…¨` `#SSHåŠ å›º`

---

## ä¸€ã€åˆå§‹ç™»å½•ä¸ç”¨æˆ·å®‰å…¨
### 1. åˆ›å»ºæ›¿ä»£rootçš„ç”¨æˆ·
```bash
# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·ï¼ˆç¤ºä¾‹ç”¨æˆ·åä¸º sysadminï¼‰
adduser sysadmin
usermod -aG sudo sysadmin

# éªŒè¯æ–°ç”¨æˆ·sudoæƒé™
su - sysadmin
sudo whoami  # åº”è¿”å›root
```

### 2. ç¦ç”¨root SSHç™»å½•
```bash
sudo nano /etc/ssh/sshd_config

# ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š
PermitRootLogin no
PasswordAuthentication no  # å¼ºåˆ¶ä½¿ç”¨å¯†é’¥ç™»å½•
```

    > âš ï¸ **å…³é”®æç¤º**ï¼š
    > 1. æ“ä½œå‰å¿…é¡»é…ç½®å¥½SSHå¯†é’¥ï¼Œå¦åˆ™ä¼šé”å®šæœåŠ¡å™¨
    > 2. æ‰§è¡Œåé‡è½½æœåŠ¡ï¼š`sudo systemctl reload ssh`

---

## äºŒã€é˜²ç«å¢™é…ç½®
### UFWåŸºç¡€è®¾ç½®
```bash
# å®‰è£…UFW
sudo apt install ufw -y

# é»˜è®¤ç­–ç•¥
sudo ufw default deny incoming
sudo ufw default allow outgoing

# å…è®¸ç«¯å£ï¼ˆæŒ‰éœ€å¼€æ”¾ï¼‰
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable
sudo ufw status verbose  # éªŒè¯è§„åˆ™
```

### ç«¯å£å®‰å…¨æŠ€å·§
```bash
# æ›´æ”¹SSHç«¯å£ï¼ˆå¯é€‰ï¼‰
sudo nano /etc/ssh/sshd_config
# ä¿®æ”¹: Port 2222  # æ”¹ä¸ºéæ ‡å‡†ç«¯å£

# ä»…å…è®¸ç‰¹å®šIPè®¿é—®SSH
sudo ufw allow proto tcp from 192.168.1.100 to any port 22
```

---

## ä¸‰ã€ç³»ç»Ÿæ›´æ–°ä¸è‡ªåŠ¨ç»´æŠ¤
### åˆå§‹å…¨é¢æ›´æ–°
```bash
sudo apt update && sudo apt full-upgrade -y
sudo apt autoremove && sudo apt clean
```

### é…ç½®è‡ªåŠ¨å®‰å…¨æ›´æ–°
```bash
sudo apt install unattended-upgrades apt-listchanges

# å¯ç”¨é…ç½®
sudo dpkg-reconfigure -plow unattended-upgrades

# éªŒè¯çŠ¶æ€ï¼š
sudo systemctl status unattended-upgrades
```

    > ğŸ”§ **é…ç½®æ–‡ä»¶ä¼˜åŒ–** (`/etc/apt/apt.conf.d/50unattended-upgrades`)ï¼š
    > ```json
    > Unattended-Upgrade::Remove-Unused-Dependencies "true";
    > Unattended-Upgrade::Automatic-Reboot "true";
    > Unattended-Upgrade::Automatic-Reboot-Time "03:00";
    > ```

---

## å››ã€å®‰å…¨åŠ å›ºå…³é”®æªæ–½
### 1. å¯ç”¨åŸºç¡€å…¥ä¾µé˜²æŠ¤
```bash
# å®‰è£…fail2ban
sudo apt install fail2ban -y

# é…ç½®SSHé˜²æŠ¤
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
sudo nano /etc/fail2ban/jail.local
```
```ini
[sshd]
enabled = true
maxretry = 3
bantime = 1h
```

### 2. å†…æ ¸å®‰å…¨åŠ å›º
```bash
# å®‰è£…å®‰å…¨ç»„ä»¶
sudo apt install linux-hardened apparmor apparmor-utils -y

# å¯ç”¨AppArmor
sudo apparmor_status
sudo aa-enforce /etc/apparmor.d/*  # å¼ºåˆ¶æ‰€æœ‰é…ç½®
```

---

## äº”ã€æ€§èƒ½ä¼˜åŒ–è®¾ç½®
### 1. äº¤æ¢ç©ºé—´ä¼˜åŒ–
```bash
# è°ƒæ•´Swappinesså€¼ï¼ˆæ¨è10-30ï¼‰
echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf

# å¯ç”¨Zswapå‹ç¼©ç¼“å­˜ï¼ˆå†…å­˜<8GBæ—¶å°¤å…¶æœ‰æ•ˆï¼‰
echo 'zswap.enabled=1' | sudo tee -a /etc/sysctl.conf
```

### 2. æ–‡ä»¶æè¿°ç¬¦ä¸è¿›ç¨‹ä¼˜åŒ–
```bash
# æé«˜ç³»ç»Ÿé™åˆ¶
sudo nano /etc/security/limits.conf
```
```conf
* soft nofile 65535
* hard nofile 65535
* soft nproc 65535
* hard nproc 65535
```

### 3. æ—¥å¿—ç®¡ç†ï¼ˆé˜²æ­¢å æ»¡ç£ç›˜ï¼‰
```bash
# å®‰è£…æ—¥å¿—è½®è¯¢å·¥å…·
sudo apt install logrotate -y

# æ‰‹åŠ¨å‹ç¼©ç°æœ‰å¤§æ—¥å¿—
sudo find /var/log -size +100M -exec truncate -s 10M {} \;
```

---

## å…­ã€å®¡è®¡ä¸ç›‘æ§
### å®‰è£…åŸºç¡€ç›‘æ§ç»„ä»¶
```bash
sudo apt install sysstat htop net-tools tree ncdu

# å¯ç”¨sysstatæ•°æ®æ”¶é›†
sudo sed -i 's/false/true/g' /etc/default/sysstat
sudo systemctl enable --now sysstat
```

### å…³é”®å®¡è®¡å‘½ä»¤
```bash
# æ£€æŸ¥å¼‚å¸¸ç™»å½•ï¼š
sudo lastb -a | head -20

# æ£€æŸ¥SUIDæ–‡ä»¶ï¼š
sudo find / -perm /4000 -ls

# åˆ—å‡ºå¼€æ”¾ç«¯å£ï¼š
sudo ss -tunlp
```

> ğŸ“Š **æ¨èå¯è§†åŒ–å·¥å…·**ï¼š
> - Cockpit (è½»é‡çº§Webé¢æ¿)ï¼š`sudo apt install cockpit`
> - Netdata (å®æ—¶ç›‘æ§)ï¼š`bash <(curl -Ss https://my-netdata.io/kickstart.sh)`

---

    **æœ€ç»ˆå®‰å…¨æ£€æŸ¥æ¸…å•**ï¼š
```bash
echo "[+] SSH é…ç½®"
sudo sshd -t && grep -E "PermitRoot|PasswordAuth" /etc/ssh/sshd_config

echo "[+] é˜²ç«å¢™çŠ¶æ€"
sudo ufw status

echo "[]+ æ›´æ–°çŠ¶æ€"
sudo unattended-upgrades --dry-run
```
    ![æœåŠ¡å™¨å®‰å…¨æ¶æ„](https://example.com/img/debian-security-layers.png)
    *(å®‰å…¨å±‚ç¤ºæ„å›¾ï¼šç½‘ç»œé˜²ç«å¢™â†’ç³»ç»ŸåŠ å›ºâ†’åº”ç”¨é˜²æŠ¤)*

    > ğŸ” **ç»´æŠ¤å»ºè®®**ï¼š
    > 1. æ¯æœˆæ‰§è¡Œï¼š`sudo lynis audit system` (å®‰è£…ï¼š`apt install lynis`)
    > 2. æ¯å­£åº¦æ›´æ–°æ‰€æœ‰SSLè¯ä¹¦ï¼Œå³ä½¿æœªåˆ°æœŸ
    > 3. ä½¿ç”¨è‡ªåŠ¨é…ç½®ç®¡ç†å·¥å…·ï¼ˆå¦‚Ansibleï¼‰ç»´æŠ¤æœåŠ¡å™¨çŠ¶æ€

    **æ–‡æ¡£ç‰ˆæœ¬**: v1.2
    **æµ‹è¯•ç¯å¢ƒ**: Debian 12.5 (Kernel 6.1.x) äº‘æœåŠ¡å™¨
    **æœ€åæ›´æ–°**: 2024-06-15
